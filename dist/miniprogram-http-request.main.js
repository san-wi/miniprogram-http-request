function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=Object.create(Object.prototype);function a(t){return null!==t&&"object"===e(t)}function i(e){if(!a(e))return!1;for(var t in e)return!1;return!0}function u(e){return"undefiend"==typeof e}function c(e){return"ArrayBuffer"===(t=e,o.toString.call(t).slice(8,-1));var t}function s(e,t){for(var n in e)n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=e[n],delete e[n])}var f={baseURL:"",data:{},timeout:0,method:"GET",dataType:"json",responseType:"text",enableCache:!1,enableQuic:!1,enableHttp2:!1,header:{Accept:"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),n=e,"undefined"!=typeof FormData&&n instanceof FormData||c(e),e;var n}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],validateStatus:function(e){return e>=200&&e<300}},l=function(){function e(){t(this,e),this.handlers=[]}return r(e,[{key:"use",value:function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"foreach",value:function(e){this.handlers.forEach((function(t){null!==t&&e(t)}))}}]),e}(),p=["url","data","header","timeout","method","dataType","responseType","enableHttp2","enableQuic","enableCache"];function h(e,t,n){return n.forEach((function(n){e=n(e,t)})),e}function y(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function d(e){return/^([a-z][z-z\d\+\-\.]*:)?\/\//i.test(e)}var m=Symbol("request"),b=Symbol("httpRequest"),v=Symbol("wxRequest"),w=Symbol("aliasMethod");function C(e){return e.cancelToken&&e.cancelToken.throwIfRequested(),e}var E=function(){function e(n){t(this,e),this.defaults=n,this.interceptors={request:new l,response:new l},this[w]()}return r(e,[{key:m,value:function(e){var t=this;"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Object.assign(this.defaults,e)).method?e.method=e.method.toUpperCase():this.defaults.method&&(e.method=this.defaults.method.toUpperCase()),e.baseURL&&!d(e.url)&&(e.url=y(e.baseURL,e.url));var n=[],r=[],o=Promise.resolve(e);for(this.interceptors.request.use(C,C),this.interceptors.request.foreach((function(e){n.push(e.fulfilled,e.rejected)})),this.interceptors.response.foreach((function(e){r.push(e.fulfilled,e.rejected)}));n.length;)o=o.then(n.shift(),n.shift());for(o=o.then((function(e){if(u(e)||!a(e))throw new TypeError("Request interceptor configuration not returned. please inspect request interceptor callback!");if(i(e))throw new Error("The expected request parameters were not obtained. please inspect request interceptor callback!");try{return t[b](e)}catch(e){throw new Error(e)}}));r.length;)o=o.then(r.shift(),r.shift());return o}},{key:v,value:function(e){return new Promise((function(t,n){e.success=function(e){return t(e)},e.fail=function(e){return n(e)};var r,o=wx.request(e);null!=(r=o)&&"function"==typeof r.then&&"function"==typeof r.catch&&o.then(t).catch(n)}))}},{key:b,value:function(e){e=Object.assign(e,{data:h(e.data,e.header,e.transformRequest||[])});var t=function(t){if(u(t)||!a(t))throw new TypeError("Response interceptor configuration not returned. please inspect response interceptor callback!");if(i(t))throw new Error("Incomplete response data. please inspect response interceptor callback!");try{return t=Object.assign(t,{config:e,data:h(t.data,t.header,e.transformResponse||[])}),e.validateStatus(t.statusCode)?t:Promise.reject(t)}catch(e){throw new Error(e)}};return this[v](function(e){var t={};return p.forEach((function(n){u(e[n])||(t[n]=e[n])})),t}(e)).then(t,t)}},{key:w,value:function(){var e=this;["DELETE","POST","CONNECT","TRACE","GET","HEAD","options"].forEach((function(t){e[t.toLowerCase()]=function(n,r){return e[m](n,Object.assign(r||{},{method:t}))}}))}}]),e}(),g=function(){function e(n){t(this,e),this.message=n,this.__CANCEL__=!0}return r(e,[{key:"toString",value:function(){return"Cancelï¼š ".concat(this.message?this.message:"")}}]),e}(),T=function(){function e(n){var r,o=this;if(t(this,e),"function"!=typeof n)throw new TypeError("executor must be a function");this.promise=new Promise((function(e){r=e})),n((function(e){o.reason||(o.reason=new g(e),r(o.reason))}))}return r(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}}]),e}();T.source=function(){var e;return{token:new T((function(t){e=t})),cancel:e}};function k(e,t,n){var r=function(r){var o=t[r];e[r]=n&&"function"==typeof o?function(){return o.apply(n,Array.prototype.slice.call(arguments))}:o};for(var o in t)r(o)}function j(e){var t=new E(e),n=function(){return E.prototype[m].apply(t,Array.prototype.slice.call(arguments))};return k(n,E.prototype,t),k(n,t),n}var q=j(f);q.create=function(e){return j(Object.assign(q.defaults,e))},q.Cancel=g,q.CancelToken=T,q.isCancel=function(e){return!(!e||!e.__CANCEL__)},q.all=function(e){return Promise.all(e)},q.version="1.0.1";export default q;
